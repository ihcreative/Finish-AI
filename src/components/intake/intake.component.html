<div class="container mx-auto px-6 py-16">

  <!-- Title Block -->
  <div class="max-w-3xl mx-auto text-left">
    <h1 class="text-4xl font-bold text-stone-800 mb-4 text-left">
      Let's finish your app.
    </h1>
    <p class="text-stone-600 mb-16">
      Tell us what’s broken. We’ll tell you what it takes to get it shipped.
    </p>
  </div>

  <div class="max-w-3xl mx-auto">
    <form [formGroup]="intakeForm" (ngSubmit)="onSubmit()"
      class="space-y-6 bg-white p-8 md:p-10 rounded-xl shadow-lg border border-stone-100">

      <!-- Full Name -->
      <div>
        <label for="fullName" class="block text-sm font-medium text-stone-700">Full Name</label>
        <input type="text" id="fullName" formControlName="fullName"
          class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 bg-white"
          [class.border-red-500]="isInvalid('fullName')"
          [class.border-stone-300]="!isInvalid('fullName')">
        <p *ngIf="isInvalid('fullName')" class="mt-1 text-sm text-red-600">Your name is required.</p>
      </div>

      <!-- Email -->
      <div>
        <label for="email" class="block text-sm font-medium text-stone-700">Email Address</label>
        <input type="email" id="email" formControlName="email"
          class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 bg-white"
          [class.border-red-500]="isInvalid('email')"
          [class.border-stone-300]="!isInvalid('email')">
        <p *ngIf="isInvalid('email')" class="mt-1 text-sm text-red-600">A valid email is required.</p>
      </div>

      <!-- Vibe App Dropdown -->
      <div>
        <label for="vibeApp" class="block text-sm font-medium text-stone-700">Which app builder did you use?</label>
        <select id="vibeApp" formControlName="vibeApp"
          class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 bg-white"
          [class.border-red-500]="isInvalid('vibeApp')"
          [class.border-stone-300]="!isInvalid('vibeApp')">
          <option value="" disabled>Select an option</option>
          <option value="Bubble">Bubble</option>
          <option value="FlutterFlow">FlutterFlow</option>
          <option value="Webflow">Webflow</option>
          <option value="Replit">Replit</option>
          <option value="Lovable">Lovable</option>
          <option value="Google AI Studio">Google AI Studio</option>
          <option value="v0.dev">v0.dev</option>
          <option value="Bolt.new">Bolt.new</option>
          <option value="Adalo">Adalo</option>
          <option value="Softr">Softr</option>
          <option value="Glide">Glide</option>
          <option value="Framer">Framer</option>
          <option value="Custom Code">Custom Code</option>
          <option value="Other">Other</option>
        </select>
        <p *ngIf="isInvalid('vibeApp')" class="mt-1 text-sm text-red-600">Please select the app builder you used.</p>
      </div>

      <!-- What's Broken -->
      <div>
        <label for="whatsBroken" class="block text-sm font-medium text-stone-700">What’s broken?</label>
        <textarea id="whatsBroken" formControlName="whatsBroken"
          rows="5"
          placeholder="Describe the problem, what you've tried, and what 'done' looks like..."
          class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 bg-white"
          [class.border-red-500]="isInvalid('whatsBroken')"
          [class.border-stone-300]="!isInvalid('whatsBroken')"></textarea>
        <p *ngIf="isInvalid('whatsBroken')" class="mt-1 text-sm text-red-600">Please describe what's broken.</p>
      </div>

      <!-- Project Link -->
      <div>
        <label for="projectLink" class="block text-sm font-medium text-stone-700">Project Link</label>
        <input type="text" id="projectLink" formControlName="projectLink"
          placeholder="https://github.com/your/project"
          class="mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 bg-white"
          [class.border-red-500]="isInvalid('projectLink')"
          [class.border-stone-300]="!isInvalid('projectLink')">
         <p *ngIf="isInvalid('projectLink')" class="mt-1 text-sm text-red-600">Project link is required.</p>
      </div>

      <!-- Deadline -->
      <div>
        <label for="deadline" class="block text-sm font-medium text-stone-700">Deadline (Optional)</label>
        <input type="text" id="deadline" formControlName="deadline"
          placeholder="e.g., ‘Next Friday’ or ‘ASAP’"
          class="mt-1 block w-full px-3 py-2 border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 bg-white">
      </div>

      <!-- Submit -->
      <div>
        <button type="submit"
          [disabled]="intakeForm.invalid || submissionStatus() === 'submitting'"
          class="w-full bg-emerald-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-emerald-600 transition-all shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:bg-stone-400 disabled:cursor-not-allowed">
          <span *ngIf="submissionStatus() === 'submitting'">Submitting...</span>
          <span *ngIf="submissionStatus() !== 'submitting'">Submit Project for Analysis</span>
        </button>
      </div>

      <!-- Submission Status Messages -->
      <div *ngIf="submissionStatus() === 'success'" class="mt-4 p-4 bg-green-100 text-green-800 border border-green-200 rounded-lg">
        Thank you! Your project has been submitted. We'll be in touch shortly.
      </div>
      <div *ngIf="submissionStatus() === 'error'" class="mt-4 p-4 bg-red-100 text-red-800 border border-red-200 rounded-lg">
        Sorry, there was an error submitting your form. Please try again later.
      </div>

    </form>
  </div>
</div>